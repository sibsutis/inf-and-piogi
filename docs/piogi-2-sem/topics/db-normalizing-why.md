---
title: Нормализация базы данных
---
Представьте, что мы не разделили таблицы и сделали одну огромную таблицу `Все_Про_Квартиры_И_Комнаты`:

| Ключ_Строки | Номер_Квартиры | Описание_Квартиры | Название_Комнаты  | Площадь_Комнаты | Температура_Комнаты | Свет_В_Комнате |
|-------------|----------------|-------------------|--------------------|------------------|----------------------|----------------|
| 1           | 25             | Уютная двушка     | Кухня              | 12.5             | 22.5                 | 1              |
| 2           | 25             | Уютная двушка     | Спальня            | 18.0             | 21.0                 | 0              |
| 3           | 101            | Просторная студия | Гостиная-студия    | 35.0             | 23.0                 | 1              |
| 4           | 102А           | Лофт с видом      | Основное           | 55.2             | 20.5                 | 1              |
| 5           | 102А           | Лофт с видом      | Санузел            | 6.8              | 24.0                 | 1              |

**Какие проблемы мы сразу видим (и получим в будущем)?**

**Избыточность данных (Redundancy):** Посмотрите на строки 1 и 2. Информация о квартире №25 ("Уютная двушка") повторяется для каждой ее комнаты. То же самое для квартиры №102А.

- **Пустая трата места:** Мы храним одно и то же снова и снова. В больших базах это выливается в гигабайты лишних данных.
- **Риск ошибок при обновлении:** Представьте, что описание квартиры №102А изменилось на "Лофт с панорамным видом". Нам придется найти все строки, относящиеся к этой квартире, и обновить описание в каждой из них. Легко пропустить одну строку и получить **несогласованные данные** (в одной строке старое описание, в другой - новое).

**Аномалии обновления/удаления/вставки (Update/Delete/Insert Anomalies):**

- **Обновление:** Мы уже обсудили риск несогласованности при обновлении повторяющихся данных.
- **Удаление:** Что если мы удалим последнюю комнату из квартиры №101 (строка 3)? Вместе с ней мы рискуем потерять всю информацию о самой квартире (ее номер и описание), потому что больше не останется строк с этой информацией.
- **Вставка:** Как нам добавить информацию о новой квартире, в которой еще нет комнат (или мы еще не внесли данные о них)? Нам придется либо оставлять поля для комнат пустыми (NULL), что не всегда удобно или возможно, либо вообще не получится добавить квартиру, пока не появится хотя бы одна комната.

**Сложность структуры:** Таблица становится "*раздутой*". Если мы захотим добавить еще какие-то данные только о квартире (например, год постройки дома) или только о комнате (например, количество окон), нам придется добавлять столбцы, которые будут пустыми (NULL) для многих строк.


**Разделение на таблицы решает эти проблемы**. Информация о каждой квартире (`Номер_квартиры`, `Описание_квартиры`) хранится только **один раз** в таблице `Квартира`. Информация о каждой комнате (`Название_комнаты`) хранится **один раз** в таблице `Комната`.

Если мы захотим изменить описание квартиры - меняем **одну** запись в таблице `Квартира`. Все комнаты этой квартиры автоматически будут "знать" новое описание через связь по `Ключ_квартиры`. Риск несогласованности минимален.

При удалении записи из `Комната` (и связанную из `Информация_о_комнате`). Информация о квартире остается нетронутой в своей таблице.

Если нужно будет добавить новую квартиру - просто добавим запись в `Квартира`.

Связи (`FOREIGN KEY`) гарантируют, что мы не сможем добавить комнату для несуществующей квартиры или информацию для несуществующей комнаты.

 Разделение таблиц предлагает нам **логическую ясность и гибкость:**

- Каждая таблица отвечает за свою **сущность** (квартира, комната, информация о комнате). Это делает структуру базы данных понятнее.
- Хотим добавить год постройки? Добавляем столбец в `Квартира`. Хотим добавить количество розеток? Добавляем столбец в `Информация_о_комнате`. Изменения локализованы и не затрагивают другие таблицы напрямую.

**Аналогия:**

Представьте, что у вас есть папки для каждого студента. Вместо того чтобы в каждой папке хранить полное описание университета, название факультета и имя ректора (которые одинаковы для многих), вы храните эту общую информацию в отдельных справочниках (как наши таблицы Квартира, Комната), а в папке студента делаете только ссылку на нужный справочник (как наши Ключ_квартиры, Ключ_комнаты).