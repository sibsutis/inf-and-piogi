## События.

Событие в C# — это механизм, позволяющий **объектам** взаимодействовать друг с другом. Он позволяет одному объекту уведомлять другие объекты о произошедших изменениях или действиях. События широко используются в графических приложениях, например, в обработке кликов мыши, нажатий клавиш, и других пользовательских действиях.

**Когда использовать события?**  
События полезны, когда нужно, чтобы один объект уведомлял другие объекты о каком-то изменении. Например, если у вас есть кнопка в приложении, событие будет срабатывать каждый раз, когда пользователь нажимает на кнопку. Или событие может срабатывать при изменении свойства.

#### 1. Объявление события

Событие в C# создается с помощью ключевого слова `event`. Обычно оно связано с делегатом — типом данных, который определяет сигнатуру метода, который будет вызываться при срабатывании события.

Пример:
```csharp
using System;

public class Button
{
    //1.Объявление делегата
    public delegate void ClickEventHandler(object sender, EventArgs e);

    //2.Объявление события, связанного с делегатом
    public event ClickEventHandler Click;

    //Метод для вызова события
    public void OnClick()
    {
        //Проверка, есть ли подписчики на событие
        Click?.Invoke(this, EventArgs.Empty);
    }
}

public class Program
{
    public static void Main()
    {
        //3. Создание объекта кнопки
        var button = new Button();

        //4. Подписка на событие
        button.Click += Button_Click;

        //5. Вызов события
        button.OnClick();
    }

    //6. Обработчик события
    static void Button_Click(object sender, EventArgs e)
    {
        Console.WriteLine("Кнопка была нажата!");
    }
}
```

**Объяснение примера:**

1. Мы объявляем делегат `ClickEventHandler`, который определяет метод, принимающий два параметра: отправителя события (`sender`) и данные события (`e`).
    
2. С помощью ключевого слова `event` мы создаем событие `Click`, которое использует этот делегат.
    
3. В классе `Button` метод `OnClick` вызывается для уведомления о том, что событие произошло. Метод `Click?.Invoke(this, EventArgs.Empty)` проверяет, есть ли подписчики на событие, и если они есть, вызывает их обработчики.
    
4. В методе `Main` мы создаем объект кнопки и подписываемся на событие `Click` с помощью оператора `+=`. То есть, когда событие `Click` произойдет, будет вызван метод `Button_Click`.
    
5. В `Button_Click` мы прописываем, что должно происходить при срабатывании события. В данном случае, выводим сообщение о том, что кнопка была нажата.
    

#### 2. Отписка от событий

Когда объект больше не нуждается в получении уведомлений о событии, его можно отписать от события с помощью оператора `-=`.

Пример:

```csharp
using System;

public class Button
{
    public event EventHandler Click;

    public void OnClick()
    {
        Click?.Invoke(this, EventArgs.Empty);
    }
}

public class Program
{
    public static void Main()
    {
        var button = new Button();
        button.Click += Button_Click;

        // Событие срабатывает
        button.OnClick();

        // Отписываемся от события
        button.Click -= Button_Click;

        // Событие больше не срабатывает
        button.OnClick();
    }

    static void Button_Click(object sender, EventArgs e)
    {
        Console.WriteLine("Кнопка была нажата!");
    }
}
```

**Объяснение примера:**

1. Сначала подписываемся на событие `Click`, и оно срабатывает при вызове `OnClick`.
    
2. Отписываемся от события с помощью `button.Click -= Button_Click;`.
    
3. После отписки событие больше не вызывает обработчик, даже если мы снова вызовем `OnClick`.
    

### Заключение

- События позволяют объектам взаимодействовать, уведомляя друг друга о происходящих изменениях.
- Для работы с событиями в C# нужно использовать делегаты, которые описывают структуру метода, который будет вызываться при срабатывании события.
- Подписка и отписка от событий осуществляется через операторы `+=` и `-=`.

