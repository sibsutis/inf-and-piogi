---
title: "ТЗ: Лабораторная работа 4 — UserControls"
---

# Лабораторная работа 4

## Краткое описание

Создание кастомного UserControl для места в зале и динамическая генерация карты зала на основе данных с API.

---

## Обязательные требования

### 1. UserControl для места
- [ ] Создан `SeatControl` (или аналог)
- [ ] Компонент вынесен в отдельный файл (.xaml + .xaml.cs)
- [ ] Содержит свойства: Row, Number, IsSelected, IsOccupied

### 2. Визуальное состояние
- [ ] Свободное место — светлый цвет
- [ ] Занятое место — тёмный цвет (некликабельно)
- [ ] Выбранное место — зелёный (или другой акцентный) цвет

### 3. Логика выбора
- [ ] Клик по свободному месту — выбор (Toggle)
- [ ] Повторный клик — отмена выбора
- [ ] Занятые места нельзя выбрать

### 4. Генерация зала
- [ ] Запрос `GET /api/sessions/{id}/seats`
- [ ] Карта зала генерируется динамически на основе данных
- [ ] Используется `UniformGrid` или аналогичный контейнер

### 5. Событие выбора
- [ ] UserControl имеет событие `OnSeatClicked` (или аналог)
- [ ] Главная страница подписывается на это событие

---

## Git-воркфлоу

| Этап | Действие |
|------|----------|
| Начало | `git checkout -b feature/lab-4-controls` |
| Коммиты | `feat: add SeatControl`, `feat: add hall generation` |
| Финал | Pull Request в `main` |

---

## Критерии оценивания

| Ранг | Требования |
|------|------------|
| **SILVER** | Карта зала генерируется, места можно выбирать/отменять |
| **GOLD** | UserControl в отдельном файле, чистый код, используются события |
| **PLATINUM** | Анимация при выборе, подсветка ряда, показ выбранных мест и суммы |

---

## API Endpoint

```
GET /api/sessions/{sessionId}/seats
```

### Ожидаемый JSON

```json
{
  "sessionId": 1,
  "rows": 5,
  "seatsPerRow": 8,
  "seats": [
    { "row": 1, "number": 1, "isOccupied": false },
    { "row": 1, "number": 2, "isOccupied": false },
    { "row": 1, "number": 3, "isOccupied": true },
    ...
  ]
}
```

---

## Визуальная схема

```
┌─────────────────────────────────┐
│            ЭКРАН                │
└─────────────────────────────────┘

  [○] [○] [●] [●] [○] [○] [○] [○]    Ряд 1
  [○] [○] [○] [○] [○] [○] [○] [○]    Ряд 2
  [○] [○] [○] [●] [●] [○] [○] [○]    Ряд 3

  ○ = свободно   ● = занято   ◉ = выбрано
```

---

## Технические ограничения

- Вся логика выбора мест живёт на клиенте
- На сервер пока ничего не отправляем (это в следующей лабе)
- UserControl должен быть переиспользуемым

---

## Критерий сдачи

1. Приложение запускается
2. При выборе сеанса открывается карта зала
3. Карта генерируется динамически (не захардкожена)
4. Можно выбирать/отменять свободные места
5. Занятые места отображаются другим цветом и некликабельны
6. Pull Request создан и готов к ревью

