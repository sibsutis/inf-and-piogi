---
title: 'Тематика лабораторной: "Умный дом"'
---
# Лабораторная работа 3
### **Вступление**

Эта лабораторная работа посвящена разработке системы управления комнатой "Умный дом" с использованием C#. Основная цель - продемонстрировать принципы объектно-ориентированного программирования, такие как классы, свойства, модификаторы доступа, события и методы.

## **Классы, события, свойства**

Создание системы управления комнатой с возможностью контроля освещения и температуры.

### **Задание 1. Создание класса с конструктором и свойствами**

**Задачи:**

1. Создать [класс](../../topics/class) `Room`, включающий в себя:
	* Приватное поле `string name` комнаты;
	* Приватное поле `double temperature` комнаты;
	* Приватное поле `bool lightState` для состояния света;
	* Публичное свойство `Name` комнаты, связанное с `name` через ( `get; set;` );
	* Публичное свойство `Temperature` комнаты, связанное с `temperature` через (`get; set;`);
	* Публичное свойство `LightState` комнаты, связанное с `lightState` через  (`get; set;`).

2. Реализовать **конструктор**,    принимающий     аргумент `string` для инициализации свойства `Name`. Реализовать проверку корректности значения (не пустая строка).


Пример проверки строки:
```csharp
string.IsNullOrWhiteSpace("строка") // – вернет false
string.IsNullOrWhiteSpace("") // – вернет true
```


### **Задание 2. Реализация методов для управления состоянием**

**Задачи:**

1. В классе `Room` реализовать методы:
	* Публичный метод, который «включает свет» (пример: `TurnLightOn()`).
	* Публичный метод, который «выключает свет» (пример: `TurnLightOff()`).
	* Публичный метод, который «переключает свет» (пример: `LightSwitch()`).
	* Публичный метод, который изменяет значение свойства `Temperature` (пример: `SetTemperature(double newTemperature)`).
	* Публичный метод, который добавляет значение к свойству `Temperature` (пример: `AddTemperature(double value)`, `value` может быть отрицательным).


### **Задание 3. Введение событий для отслеживания изменений состояния**

**Задачи:**

В классе `Room`:

1. объявить публичное событие изменения состояния освещения (пример: `public event Action<bool> OnLightStateChanged`). 
2. объявить публичное событие изменения температуры (пример: `public event Action<double> OnTemperatureChanged`). 
3. объявить публичное событие изменения имени (пример: `public event Action<string> OnNameChanged`). 
---

4. В соответствующем событию свойстве вызывать это событие. 
5. Аналогично реализовать событие для `OnLightStateChanged` и `OnNameChanged`.

Пример: в свойстве `Temperature` в методе `set` вызывается событие `OnTemperatureChanged`
```csharp
//Объявление события для изменения температуры. Подписчики будут уведомлены при изменении температуры.
public Event Action<double> OnTemperatureChanged

//Приватное поле для хранения значения температуры.
double temperature

//Публичное свойство для доступа к значению температуры.
public double Temperature
{
	get
	{
		//Возвращает текущее значение температуры из ПОЛЯ.
		return temperature;
	}
	set
	{
	//Присваивает новое значение полю temperature.
	temperature = value;

	//Вызывает событие OnTemperatureChanged, передавая новое значение температуры подписчикам.
	//?. - оператор null-conditional, гарантирует, что событие будет вызвано только если есть подписчики-обработчики. Без знака ? и при отсутствии подписчиков события - программа выдаст Exception.
	//Как аргумент в обработчик передается значение.
	OnTemperatureChanged?.Invoke(value);
	}
}
```



**Почему лучше вызывать события в свойствах:**

- **Инкапсуляция:** События тесно связаны с изменением состояния объекта. Размещение логики вызова событий внутри свойств обеспечивает инкапсуляцию этой логики, скрывая детали реализации от внешнего мира.
- **Удобство:** Вам, как разработчикам, использующим класс, не нужно помнить о вызове события отдельно. Они просто устанавливают значение свойства, и событие вызывается автоматически.
- **Согласованность:** Гарантирует, что событие вызывается всегда, когда изменяется значение свойства, что помогает поддерживать согласованность состояния объекта.
- **Упрощение кода:** Уменьшает количество кода, необходимого для отслеживания изменений состояния объекта и уведомления подписчиков.


### **Задание 4. Добавление метода обработчика событий в основной программе**

**Задачи:**

В основной программе `MainWindow` (или ваше название окна) реализовать обработчики для событий `OnLightStateChanged`, `OnTemperatureChanged` и `OnNameChanged`.
1. `OnLightStateChanged` - обработчик должен изменять значение `CheckBox` или `RadioButton` на соответствующее значение свойства.
2. `OnTemperatureChanged` - обработчик должен изменять значение `Slider` на соответствующее значение свойства.
3. `OnNameChanged` - обработчик должен изменять значение `TextBlock` на соответствующее значение свойства.

>***Дополнительно:** добавить проверку в обработчик температуры предупреждение о высокой или низкой температуре.*

## **Графический интерфейс** 

В главном окне реализовать элементы управления:

1. Состоянием света (`CheckBox` или `RadioButton`);
2. Температурой (`Slider`);
3. Название комнаты (`TextBlock` или `ComboBox`).


### **Пример графического интерфейса программы**

![](../img/3laba-prog-sample.png)

## UML диаграмма класса

Пример диаграммы класса `Room`:

```kroki-mermaid
classDiagram
  class Room {
      -string name
      -double temperature
      -bool lightState
      +string Name 
      +double Temperature 
      +bool LightState 
      +Room(string name)
      +TurnLightOn()
      +TurnLightOff()
      +LightSwitch()
      +SetTemperature(double newTemperature)
      +AddTemperature(double value)
      +OnLightStateChanged : Action<bool>
      +OnTemperatureChanged : Action<double>
      +OnNameChanged : Action<string>
  }
```