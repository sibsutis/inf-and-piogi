# Лабораторная работа 6

## Вступление

Данная лабораторная работа направлена на изучение основ работы с реляционной базой данных SQLite, основам языка SQL и работой с базами данных в C#. 

---

## Задание 1: Создание базы данных

### **Задача:** 
Создание базы данных для хранения информации о квартирах и комнатах для приложения умного дома.

### **Требования:**

Создать базу данных с помощью `DB Browser for SQLite`.

### База данных должна содержать 3 таблицы:

- Таблица `Apartments` - для хранения информации о квартирах.
- Таблица `Rooms` - для хранения комнат.
- Таблица `RoomInfo` - для хранения данных комнаты.

### Таблица `Apartments` должна содержать:

- Столбец `Id` - первичный ключ таблицы;
- Столбец `ApartmentNumber` - номер квартиры - уникальный;
- Столбец `Description` - описание квартиры, текстовое поле.

### Таблица `Rooms` должна содержать:

- Столбец `Id` - первичный ключ таблицы;
- Столбец `ApartmentId` - внешний ключ к таблице `Apartments`;
- Столбец `Name` - название комнаты, текстовое поле.

### Таблица `RoomInfo` должна содержать:

- Столбец `RoomId` - первичный и внешний ключ таблицы для связи с таблицей `Rooms`;
- Столбец `Area` - площадь комнаты, число;
- Столбец `Temperature` - температура в комнаты, число;
- Столбец `IsLightOn` - свет в комнате, число, с проверкой диапазона (0,1).

### Общие требования к базе данных:

- Связь таблицы `Apartments` к `Rooms` должна быть один ко многим;
- Связь таблицы `Rooms` к `RoomInfo` должна быть один к одному;
- Все поля должны иметь ограничение `NOT NULL`;


## Задание 2: Программа для работы с БД
### **Задача:** 
Разработать программу `C#` `WPF` для работы с базой данных. 

### Программа должна иметь следующий функционал:

Класс для логики взаимодействия с базой данных.
Логика для взаимодействия с базой данных должна быть описана в отдельном классе и отдельном файле.

- Возможность выбрать файл для подключения к базе данных;
- Возможность получить и вывести в `DataGrid` данные из базы данных;
- Возможность добавления комнат и квартир в базу данных;
- Возможность изменения данных о комнатах и квартирах в базе данных;
- Возможность удаления комнат и квартир из базы данных;
	- При удалении квартиры должны удаляться соответствующие ей комнаты.

Информация на графическом интерфейсе (в `DataGrid`) должна соответствовать данным в базе данных.
Информация в базе данных должна обновляться при изменении данных графическом интерфейсе (в `DataGrid`).

### Новые классы:

Класс `Room` должен быть расширен для хранения `Id` и `ApartId` - поле и свойство.

Создать класс `Apartment` для хранения информации о квартирах.
Класс `Apartment` должен содержать:

- `Id` - поле и свойство для хранения ключа;
- `ApartmentNumber` - поле и свойство для хранения номер квартиры;
- `Description` - поле и свойство для хранения описания квартиры.

**Все пользовательские классы должны быть определенны в отдельных файлах.**

## Демонстрация примера программы

[Демонстрация работы программы](../../main-pages/6-laba/#_19)
