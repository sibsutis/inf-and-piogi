---
title: 'Тематика лабораторной: "Умный дом с наворотом"'
---
# Лабораторная работа 4

### **Задание 1. Реализовать структуру для хранения комнат.**

**В данной работе используется класс, написанный в [прошлой работе](../task3).**

**Задачи:**

1. В основной программе объявить `List<Room>` для хранения пользовательских комнат.

### **Задание 2. Привязка списка к элементу на окне.**


**Задачи:**

1. Использовать для отображения списка комнат `ListBox` или `ComboBox`. Используя свойство `ItemsSource` у `ListBox \ ComboBox`  назначить источник данных для список для хранения `List<Room>`.
2. С помощью свойства `DisplayMemberPath` у элементов `ListBox` или `ComboBox` указать название свойства для отображения.
---

- [Пример ItemsSource](../../topics/itemssource)
- [Пример DisplayMemberPath](../../topics/displaymemberpath)
- [Пример Binding](../../topics/binding)
---

### **Задание 3. Реализация функционала для добавления и изменения объектов (комнат).**


**Задачи:**

1. Реализовать функционал добавления новой комнаты. *Пример:*
	1. ==Создание временного объекта `Room`.==
	2. Привязка этого объекта через свойство `DataContext` в окно редактора комнаты.
	3. Привязка свойств объекта к графическим элементам окна в двухстороннем режиме.
	4. Закрытие окна после изменения значений.
2. Реализовать функционал удаления выбранной комнаты.
3. Реализовать функционал для редактирования данных выбранной комнаты комнаты.

---

Использовать `Menu` и `MenuItem` для кнопок [пример](../../topics/menuitem)

---

### **Дополнительные задания.**

#### Логирование событий.

**Задачи:**
1. Добавить в главное окно программы `ListBox` или `TextBlock` для логирования происходящих событий.
2. Реализовать обработчик для вывода в поле лога информации о изменении свойств класса `Room`в формате `[Текущее время]-[Название команы]: свойство [назание свойства] изменено на [новое значение свойства]`

**Дополнительно:** изменить сигнатуру событий в классе `Room` с `Action<Type>` на собственный делегат. 

Пример:

```csharp
delegate void SomePropertyChanged(Room room, string propertyName, string newValue, DateTime eventTime);
event SomePropertyChanged Notify;
```



