
Во время написания программы могут возникать потребности в преобразовании (или приведении) одного типа данных к другому. 
## Обработка и преобразование ввода

Например, метод `Console.ReadLine()` **всегда возвращает строку**. Если вам нужно работать с числами или другими типами данных, вам нужно преобразовать полученный ввод.

Часто для этого используют класс `Convert`, но это может вызвать проблемы, если пользователь введет текст, который невозможно преобразовать в целевой тип. Например, следующий код вызовет ошибку, если пользователь введет "привет" вместо числа:

```csharp
// Этот код небезопасен и может вызвать исключение
Console.Write("Сколько тебе лет?: ");
int age = Convert.ToInt32(Console.ReadLine()); 
```

> Класс `Convert` может использоваться тогда, когда мы *уверены* в приведении типов данных.

Полный список методов:

- ToBoolean(value)
- ToByte(value)
- ToChar(value)
- ToDateTime(value)
- ToDecimal(value)
- ToDouble(value)
- ToInt16(value)
- ToInt32(value)
- ToInt64(value)
- ToSByte(value)
- ToSingle(value)
- ToUInt16(value)
- ToUInt32(value)
- ToUInt64(value)
- ToString()

Здесь `value` - значение, которое мы будем преобразовывать.

Метод `ToString()` может использоваться без указания класса `Convert`, пример:

```csharp

string five = 5.ToString() // в переменную five запишется СТРОКА "5"

```
## Безопасное преобразование с помощью TryParse

Более безопасный способ обработки преобразования ввода - использование метода `TryParse`. Этот метод **пытается** преобразовать строку в указанный тип данных и возвращает логическое значение (`bool`), указывающее, удалось ли преобразование. Он также возвращает преобразованное значение через out-параметр.

Пример использования `int.TryParse` для безопасного получения целочисленного ввода от пользователя:

```csharp
Console.WriteLine("Пожалуйста, введите ваш возраст:");
string input = Console.ReadLine();
int age;
if (int.TryParse(input, out age))
{
	Console.WriteLine($"Ваш возраст: {age} лет.");
}
else
{
	Console.WriteLine("Неверный ввод. Пожалуйста, введите корректное число.");
}
```

Обратите внимание на то, что мы используем `int.TryParse`. Это значит, что мы пытаемся преобразовать строку именно в целочисленный тип. Если мы введем дробное число, то получим ошибку:

```
Пожалуйста, введите ваш возраст:
5,5
Неверный ввод. Пожалуйста, введите корректное число.
```

Мы можем заменить `int` на нужный нам тип данных. Пусть будет `double`:

```csharp
Console.WriteLine("Пожалуйста, введите ваш возраст:");
string input = Console.ReadLine();
double age; // меняем тут, так как в эту переменную выводим результат преобразования
if (double.TryParse(input, out age)) // и меняем тут
{
	Console.WriteLine($"Ваш возраст: {age} лет.");
}
else
{
	Console.WriteLine("Неверный ввод. Пожалуйста, введите корректное число.");
}
```

```
Input age:
5.5
Age is: 5.5 year.
```


## Метод Parse

Помимо `TryParse`, у каждого числового типа есть метод `Parse`. Он делает то же самое — преобразует строку в число, но с одним ключевым отличием: если преобразование невозможно, **программа выбрасывает исключение и аварийно завершается** (об исключениях поговорим позже).

```csharp
Console.Write("Сколько тебе лет?: ");
// Эта строка вызовет ошибку, если ввести не число
int age = int.Parse(Console.ReadLine()); 
```

Метод Parse следует использовать только тогда, когда вы абсолютно уверены, что строка содержит корректное число.


## Приведение числовых типов: явное и неявное
### Неявное приведение типов

Это "*безопасное*" приведение, при котором не происходит потери данных. Компилятор выполняет его автоматически (например, `int` в `double`).

```csharp
int myInt = 15;
double myDouble = myInt; // Неявное приведение, всё работает автоматически

Console.WriteLine(myDouble); // Выведет 15, myDouble будет 15.0
```


### Явное приведение типов

Это "*потенциально опасное*" приведение, при котором возможна потеря данных. Здесь вы должны явно указать компилятору к какому типу данных нужно привести (например, `double` в `int`).

```csharp
double myDouble = 9.78;
// int myInt = myDouble; // Эта строка вызовет ошибку компиляции.

// Нужно указать тип в скобках, чтобы выполнить явное приведение
int myInt = (int)myDouble; 

Console.WriteLine(myInt); // Выведет 9
```

Также вы **не сможете** привести тип строки к числу:

```csharp
int a = (int)"15"; // Cannot convert type 'string' to 'int'
```